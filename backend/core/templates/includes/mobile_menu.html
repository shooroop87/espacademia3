{% load static i18n %}
<!-- Mobile Menu -->
<div class="offcanvas offcanvas-end mobile-nav-wrap" tabindex="-1" id="menu-mobile" aria-labelledby="menu-mobile" aria-modal="true" role="dialog">
    <div class="fixed-nav-rounded-div">
        <div class="rounded-div-wrap">
            <div class="rounded-div"></div>
        </div>
    </div>
    <div class="offcanvas-header top-nav-mobile">
        <div class="offcanvas-title">
            <a href="{% url 'index' %}" class="site-logo">
                <img src="https://espacademia.com/wp-content/uploads/2023/08/2.png" alt="ESPacademia" class="main-logo" width="180" height="80">
            </a>
        </div>
        <div data-bs-dismiss="offcanvas" class="btn-close-menu">
            <i class="icon-times-solid"></i>
        </div>
    </div>
    <div class="offcanvas-body inner-mobile-nav">
        <div class="mb-body">
            <ul id="menu-mobile-menu" class="style-1">
                <li class="menu-item">
                    <a href="{% url 'index' %}" class="item-menu-mobile">Главная</a>
                </li>
                <li class="menu-item">
                    <a href="{% url 'index' %}#school" class="item-menu-mobile">О Школе</a>
                </li>
                <li class="menu-item has-children">
                    <a href="#" class="item-menu-mobile toggle-submenu">Курсы <i class="icon-chevron-down" style="font-size:10px; margin-left:6px;"></i></a>
                    <ul class="sub-menu" style="display:none; padding-left: 15px;">
                        <li><a href="{% url 'courses:espanol_activo' %}" class="item-menu-mobile">Español Activo</a></li>
                        <li><a href="{% url 'courses:espanol_activo_intensivo' %}" class="item-menu-mobile">Español Activo Intensivo</a></li>
                        <li><a href="{% url 'courses:club_con_nositelem' %}" class="item-menu-mobile">Разговорный клуб с носителем</a></li>
                        <li><a href="{% url 'courses:kursy_dlya_detej' %}" class="item-menu-mobile">Испанский для детей</a></li>
                        <li><a href="{% url 'courses:individualnye_zanyatiya' %}" class="item-menu-mobile">Индивидуальные занятия</a></li>
                        <li><a href="{% url 'courses:podgotovka_dele' %}" class="item-menu-mobile">Подготовка к DELE</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a href="{% url 'teachers' %}" class="item-menu-mobile">Преподаватели</a>
                </li>
                <li class="menu-item">
                    <a href="{% url 'index' %}#reviews" class="item-menu-mobile">Отзывы</a>
                </li>
                <li class="menu-item">
                    <a href="{% url 'index' %}#contacts" class="item-menu-mobile">Контакты</a>
                </li>
            </ul>
            <div class="support">
                <a href="https://lk.espacademia.com/login" target="_blank" class="tf-btn btn-bg-primary w-full mb_12" style="--button-width: 100%;">
                    <span>Личный кабинет</span>
                    <span class="bg-effect"></span>
                </a>
                <a href="https://api.whatsapp.com/send/?phone=79262576680" target="_blank" class="tf-btn w-full" style="--button-width: 100%;background-color: #e4e95b;">
                    <span class="d-flex align-items-center gap_8"><i class="icon-ChatCircleDots"></i>Написать в WhatsApp</span>
                    <span class="bg-effect"></span>
                </a>
                <ul class="mb-info mt_20">
                    <li>Телефон: <a href="tel:+79262576680" class="number">+7 926 257 6680</a></li>
                    <li>Email: <a href="mailto:info@espacademia.com" class="link">info@espacademia.com</a></li>
                    <li>Адрес: <span class="number">Москва, ул. Менжинского 29</span></li>
                    <li>
                        <div class="wrap-social">
                            <p>Мы в соцсетях:</p>
                            <ul class="social align-items-center d-flex gap_24">
                                <li><a href="https://vk.com/espacademia" target="_blank" class="icon-VkLogo"></a></li>
                                <li><a href="https://t.me/espacademia" target="_blank" class="icon-TelegramLogo"></a></li>
                                <li><a href="https://api.whatsapp.com/send/?phone=79262576680" target="_blank" class="icon-WhatsappLogo"></a></li>
                                <li><a href="https://www.instagram.com/espacademia.ru/" target="_blank" class="icon-InstagramLogo"></a></li>
                                <li><a href="https://www.youtube.com/@espacademia" target="_blank" class="icon-YoutubeLogo"></a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<style>
@media (max-width: 991px) {
    .header .header-inner {
        height: 80px;
    }
}
#menu-mobile .sub-menu .item-menu-mobile {
    font-size: 16px;
    padding: 16px 0;
    font-weight: 500;
}
#menu-mobile .toggle-submenu .icon-chevron-down {
    transition: transform 0.3s;
}
#menu-mobile .toggle-submenu.open .icon-chevron-down {
    transform: rotate(180deg);
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var offcanvasEl = document.getElementById('menu-mobile');
    var offcanvas = bootstrap.Offcanvas.getOrCreateInstance(offcanvasEl);
    
    // Закрытие при клике на якорные ссылки
    offcanvasEl.querySelectorAll('a[href*="#"]:not(.toggle-submenu)').forEach(function(link) {
        link.addEventListener('click', function() {
            offcanvas.hide();
        });
    });

    // Раскрытие подменю курсов
    offcanvasEl.querySelectorAll('.toggle-submenu').forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            var submenu = this.nextElementSibling;
            if (submenu) {
                var isOpen = submenu.style.display !== 'none';
                submenu.style.display = isOpen ? 'none' : 'block';
                this.classList.toggle('open', !isOpen);
            }
        });
    });
});
</script>